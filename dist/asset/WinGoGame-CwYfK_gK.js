import{u as P,a as w,r as x,j as e}from"./index-CFviucmj.js";import{m as b}from"./motion-DaWjJBOR.js";import{A as D}from"./arrow-left-CvaQ1MOB.js";import{C as O}from"./coins-CQMp_lc8.js";import{B as Y,A as U}from"./banknote-ifdSYtvx.js";import{R as B}from"./refresh-cw-BXFRkxpV.js";import{B as V}from"./bar-chart-2-CX838BcL.js";const h=Array.from({length:14},(g,f)=>f+1),n={red:[1,3,5,7,9,11,13],green:[2,4,6,8,10,12,14]};function Z(){const g=P(),{romId:f,userId:R,balance:l}=w(),$=w(s=>s.addBalance),A=w(s=>s.subtractBalance),[d,k]=x.useState("1000"),[i,y]=x.useState(null),[a,M]=x.useState(!1),[j,L]=x.useState(null),[N,S]=x.useState(""),[p,W]=x.useState(!1),[c,z]=x.useState([]),H=s=>{k(s)},m=s=>{if(parseInt(d)<=0||isNaN(parseInt(d))){alert("Please enter a valid bet amount");return}if(parseInt(d)>l){alert("Insufficient balance");return}A(parseInt(d)),y(s),M(!0);let t=!1,r=.5;l>1e3&&l<=5e3?r=.5:l>5e3&&l<=2e4?r=.8:l>2e4&&l<=3e4?r=.7:l>3e4&&l<=4e4?r=.9:l>4e4&&(r=.6);const o=C(s);l+o>49e3&&(r=0),t=Math.random()<r;const v=G(s,t);setTimeout(()=>{L(v);const I=E(s,v);if(I){const u=C(s);$(u),S(`You won Rp ${u.toLocaleString()}!`)}else S(`You lost Rp ${parseInt(d).toLocaleString()}`);z(u=>[{timestamp:new Date,amount:parseInt(d),result:I?"win":"lose",betType:s,resultNumber:v},...u]),M(!1),y(null)},3e3)},E=(s,t)=>s==="odd"?t%2!==0:s==="even"?t%2===0:s==="small"?t>=1&&t<=7:s==="big"?t>=8&&t<=14:s==="red"?n.red.includes(t):s==="green"?n.green.includes(t):parseInt(s)===t,C=s=>{const t=parseInt(d);return["odd","even","small","big","red","green"].includes(s)?t*2:t*14},G=(s,t)=>{if(t)if(s==="odd"){const r=h.filter(o=>o%2!==0);return r[Math.floor(Math.random()*r.length)]}else if(s==="even"){const r=h.filter(o=>o%2===0);return r[Math.floor(Math.random()*r.length)]}else return s==="small"?Math.floor(Math.random()*7)+1:s==="big"?Math.floor(Math.random()*7)+8:s==="red"?n.red[Math.floor(Math.random()*n.red.length)]:s==="green"?n.green[Math.floor(Math.random()*n.green.length)]:parseInt(s);else if(s==="odd"){const r=h.filter(o=>o%2===0);return r[Math.floor(Math.random()*r.length)]}else if(s==="even"){const r=h.filter(o=>o%2!==0);return r[Math.floor(Math.random()*r.length)]}else{if(s==="small")return Math.floor(Math.random()*7)+8;if(s==="big")return Math.floor(Math.random()*7)+1;if(s==="red")return n.green[Math.floor(Math.random()*n.green.length)];if(s==="green")return n.red[Math.floor(Math.random()*n.red.length)];{let r=h.filter(o=>o!==parseInt(s));return r[Math.floor(Math.random()*r.length)]}}};return x.useEffect(()=>{if(l<1e3){const s=setTimeout(()=>{alert("Your balance has been depleted. Please deposit to continue playing.")},1e3);return()=>clearTimeout(s)}},[l]),e.jsx(b.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"min-h-screen pt-4 pb-20 px-4",children:e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsxs("div",{className:"flex flex-col md:flex-row justify-between mb-6 space-y-3 md:space-y-0",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("button",{onClick:()=>g("/dashboard"),className:"text-gray-400 hover:text-white mr-3",children:e.jsx(D,{size:24})}),e.jsxs("div",{children:[e.jsx("h1",{className:"font-orbitron text-2xl font-bold gradient-text",children:"WINGO GAME"}),e.jsxs("div",{className:"flex text-xs text-gray-400",children:[e.jsxs("span",{className:"mr-4",children:["ID Rom: ",f]}),e.jsxs("span",{children:["ID User: ",R]})]})]})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("div",{className:"text-xs text-gray-400",children:["Balance: ",e.jsxs("span",{className:"text-success-500 font-mono",children:["Rp ",l.toLocaleString()]})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs("button",{onClick:()=>g("/convert"),className:"btn bg-dark-300 hover:bg-dark-200 text-xs py-1 px-3",children:[e.jsx(O,{size:14,className:"mr-1"}),"Convert"]}),e.jsxs("button",{onClick:()=>g("/deposit"),className:"btn bg-dark-300 hover:bg-dark-200 text-xs py-1 px-3",children:[e.jsx(Y,{size:14,className:"mr-1"}),"Deposit"]}),e.jsxs("button",{onClick:()=>g("/withdraw"),className:"btn bg-dark-300 hover:bg-dark-200 text-xs py-1 px-3",children:[e.jsx(U,{size:14,className:"mr-1"}),"Withdraw"]})]})]})]}),e.jsxs("div",{className:"card p-4 mb-6",children:[e.jsx("h2",{className:"text-lg font-semibold mb-4 font-orbitron",children:"Predict Number, Color, Odd/Even, Big/Small"}),e.jsxs("div",{className:"flex flex-col items-center justify-center py-6",children:[e.jsx("div",{className:"mb-6 relative",children:e.jsx("div",{className:"h-36 w-36 rounded-full border-4 border-primary-600 flex items-center justify-center bg-dark-300 shadow-neon",children:a?e.jsx(b.div,{animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"},className:"text-4xl font-bold font-orbitron",children:e.jsx(B,{size:48,className:"text-primary-400"})}):j!==null?e.jsx(b.div,{initial:{scale:.6,opacity:0},animate:{scale:1,opacity:1},transition:{type:"spring"},className:`text-5xl font-bold font-orbitron ${n.red.includes(j)?"text-error-500":"text-success-500"}`,children:j}):e.jsx("div",{className:"text-4xl font-bold font-orbitron text-primary-400 opacity-50",children:"?"})})}),N&&e.jsx(b.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},className:`mb-4 text-center font-semibold ${N.includes("won")?"text-success-500":"text-error-500"}`,children:N}),e.jsxs("div",{className:"w-full max-w-md mb-4",children:[e.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Bet Amount"}),e.jsxs("div",{className:"flex",children:[e.jsx("input",{type:"number",value:d,onChange:s=>k(s.target.value),min:"1000",max:"1000000",className:"input flex-1 font-mono",disabled:a}),e.jsx("button",{onClick:()=>i&&m(i),disabled:a||!i||parseInt(d)>l,className:`ml-2 btn ${a||!i||parseInt(d)>l?"bg-dark-400 text-gray-500 cursor-not-allowed":"bg-primary-600 hover:bg-primary-700 text-white"}`,children:a?e.jsx(B,{className:"animate-spin",size:20}):"Spin"})]})]}),e.jsx("div",{className:"grid grid-cols-4 gap-2 w-full max-w-md mb-6",children:["1000","5000","10000","50000","100000","200000","500000","1000000"].map(s=>e.jsx("button",{onClick:()=>H(s),disabled:a,className:"btn bg-dark-300 hover:bg-dark-200 text-xs p-2",children:parseInt(s).toLocaleString()},s))}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 w-full max-w-md mb-4",children:[e.jsx("button",{onClick:()=>m("odd"),disabled:a,className:`btn py-3 ${a?"bg-dark-400 text-gray-500 cursor-not-allowed":i==="odd"?"bg-primary-600 text-white":"bg-dark-300 hover:bg-dark-200 text-white"}`,children:"Odd"}),e.jsx("button",{onClick:()=>m("even"),disabled:a,className:`btn py-3 ${a?"bg-dark-400 text-gray-500 cursor-not-allowed":i==="even"?"bg-primary-600 text-white":"bg-dark-300 hover:bg-dark-200 text-white"}`,children:"Even"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 w-full max-w-md mb-6",children:[e.jsx("button",{onClick:()=>m("small"),disabled:a,className:`btn py-3 ${a?"bg-dark-400 text-gray-500 cursor-not-allowed":i==="small"?"bg-primary-600 text-white":"bg-dark-300 hover:bg-dark-200 text-white"}`,children:"Small (1-7)"}),e.jsx("button",{onClick:()=>m("big"),disabled:a,className:`btn py-3 ${a?"bg-dark-400 text-gray-500 cursor-not-allowed":i==="big"?"bg-primary-600 text-white":"bg-dark-300 hover:bg-dark-200 text-white"}`,children:"Big (8-14)"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 w-full max-w-md mb-6",children:[e.jsx("button",{onClick:()=>m("red"),disabled:a,className:`btn py-3 ${a?"bg-dark-400 text-gray-500 cursor-not-allowed":i==="red"?"bg-error-600 text-white":"bg-error-600/70 hover:bg-error-600 text-white"}`,children:"Red"}),e.jsx("button",{onClick:()=>m("green"),disabled:a,className:`btn py-3 ${a?"bg-dark-400 text-gray-500 cursor-not-allowed":i==="green"?"bg-success-600 text-white":"bg-success-600/70 hover:bg-success-600 text-white"}`,children:"Green"})]}),e.jsxs("div",{className:"w-full max-w-md",children:[e.jsx("h3",{className:"text-sm text-gray-400 mb-2",children:"Bet on Number (14x payout)"}),e.jsx("div",{className:"grid grid-cols-7 gap-2",children:h.map(s=>e.jsx("button",{onClick:()=>m(s.toString()),disabled:a,className:`btn py-3 ${a?"bg-dark-400 text-gray-500 cursor-not-allowed":i===s.toString()?n.red.includes(s)?"bg-error-600 text-white":"bg-success-600 text-white":n.red.includes(s)?"bg-error-600/30 hover:bg-error-600/50 text-white":"bg-success-600/30 hover:bg-success-600/50 text-white"}`,children:s},s))})]})]})]}),e.jsx("div",{className:"mb-4",children:e.jsxs("button",{onClick:()=>W(!p),className:"btn btn-outline w-full flex items-center justify-center",children:[e.jsx(V,{className:"mr-2",size:18}),p?"Hide History & Stats":"Show History & Stats"]})}),p&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"card p-4",children:[e.jsx("h3",{className:"text-lg font-semibold mb-3",children:"History"}),e.jsx("div",{className:"max-h-60 overflow-y-auto",children:c.length>0?e.jsx("div",{className:"space-y-2",children:c.map((s,t)=>e.jsxs("div",{className:"flex justify-between items-center p-2 bg-dark-300 rounded-md",children:[e.jsxs("div",{children:[e.jsxs("div",{className:`text-sm ${s.result==="win"?"text-success-500":"text-error-500"}`,children:[s.result==="win"?"Win":"Loss",": ",s.betType]}),e.jsxs("div",{className:"text-xs text-gray-400",children:["Result: ",e.jsx("span",{className:n.red.includes(s.resultNumber)?"text-error-500":"text-success-500",children:s.resultNumber})," â€¢ ",s.timestamp.toLocaleTimeString()]})]}),e.jsxs("div",{className:"font-mono",children:[s.result==="win"?"+":"-",s.amount.toLocaleString()]})]},t))}):e.jsx("div",{className:"text-center text-gray-400 py-6",children:"No game history yet"})})]}),e.jsxs("div",{className:"card p-4",children:[e.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Statistics"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-dark-300 p-3 rounded-md",children:[e.jsx("div",{className:"text-sm text-gray-400",children:"Total Games"}),e.jsx("div",{className:"text-2xl font-semibold",children:c.length})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{className:"bg-dark-300 p-3 rounded-md",children:[e.jsx("div",{className:"text-sm text-gray-400",children:"Wins"}),e.jsx("div",{className:"text-xl font-semibold text-success-500",children:c.filter(s=>s.result==="win").length})]}),e.jsxs("div",{className:"bg-dark-300 p-3 rounded-md",children:[e.jsx("div",{className:"text-sm text-gray-400",children:"Losses"}),e.jsx("div",{className:"text-xl font-semibold text-error-500",children:c.filter(s=>s.result==="lose").length})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{className:"bg-dark-300 p-3 rounded-md",children:[e.jsx("div",{className:"text-sm text-gray-400",children:"Most Common Result"}),e.jsx("div",{className:"text-xl font-semibold",children:c.length>0?Object.entries(c.reduce((s,t)=>(s[t.resultNumber]=(s[t.resultNumber]||0)+1,s),{})).sort((s,t)=>t[1]-s[1])[0][0]:"N/A"})]}),e.jsxs("div",{className:"bg-dark-300 p-3 rounded-md",children:[e.jsx("div",{className:"text-sm text-gray-400",children:"Net Profit/Loss"}),e.jsxs("div",{className:`text-xl font-semibold ${c.reduce((s,t)=>t.result==="win"?s+t.amount:s-t.amount,0)>=0?"text-success-500":"text-error-500"}`,children:["Rp ",Math.abs(c.reduce((s,t)=>t.result==="win"?s+t.amount:s-t.amount,0)).toLocaleString()]})]})]})]})]})]})]})})}export{Z as default};
