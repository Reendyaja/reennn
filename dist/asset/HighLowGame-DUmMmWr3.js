import{u as Y,a as C,r as h,j as e}from"./index-CFviucmj.js";import{m as R}from"./motion-DaWjJBOR.js";import{A as O}from"./arrow-left-CvaQ1MOB.js";import{C as W}from"./coins-CQMp_lc8.js";import{B as q,A as J}from"./banknote-ifdSYtvx.js";import{R as K}from"./refresh-cw-BXFRkxpV.js";import{B as Q}from"./bar-chart-2-CX838BcL.js";const x=["hearts","diamonds","clubs","spades"],n=["A","2","3","4","5","6","7","8","9","10","J","Q","K"];function A({suit:f,value:v,hidden:N=!1}){const a=()=>f==="hearts"||f==="diamonds"?"text-red-500":"text-white",y=()=>{switch(f){case"hearts":return"♥";case"diamonds":return"♦";case"clubs":return"♣";case"spades":return"♠";default:return""}};return e.jsx("div",{className:`relative w-32 h-48 rounded-lg flex flex-col justify-between p-3 shadow-xl transition-transform duration-300 ${N?"bg-gradient-to-br from-dark-300 to-primary-900 border-2 border-primary-600":"bg-gradient-to-br from-dark-200 to-dark-400 border-2 border-gray-700"}`,children:N?e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsx("div",{className:"font-orbitron text-primary-400 text-xl font-bold",children:"ASSET"})}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:`text-xl font-bold ${a()}`,children:v}),e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsx("div",{className:`text-4xl ${a()}`,children:y()})}),e.jsx("div",{className:`text-xl font-bold self-end transform rotate-180 ${a()}`,children:v})]})})}function se(){const f=Y(),{romId:v,userId:N,balance:a}=C(),y=C(t=>t.addBalance),V=C(t=>t.subtractBalance),[d,I]=h.useState("1000"),[g,L]=h.useState(null),[l,B]=h.useState(!1),[m,H]=h.useState(!1),[T,k]=h.useState(null),[$,M]=h.useState(""),[S,E]=h.useState(!1),[b,P]=h.useState([]),j=()=>{const t=x[Math.floor(Math.random()*x.length)],r=n[Math.floor(Math.random()*n.length)];return{suit:t,value:r}},z=t=>{I(t)},u=t=>t==="A"?1:t==="J"?11:t==="Q"?12:t==="K"?13:parseInt(t),D=()=>{if(parseInt(d)<=0||isNaN(parseInt(d))){alert("Please enter a valid bet amount");return}if(parseInt(d)>a){alert("Insufficient balance");return}const t=j();L(t),B(!0),k(null),M("")},w=t=>{if(!g||!l)return;V(parseInt(d)),H(!0);let r=!1,c=.5;a>1e3&&a<=5e3?c=.5:a>5e3&&a<=2e4?c=.8:a>2e4&&a<=3e4?c=.7:a>3e4&&a<=4e4?c=.9:a>4e4&&(c=.6),a+parseInt(d)>49e3&&(c=0),r=Math.random()<c,setTimeout(()=>{const i=G(g,t,r);let s=!1;t==="higher"?s=u(i.value)>u(g.value):t==="lower"?s=u(i.value)<u(g.value):t==="red"?s=i.suit==="hearts"||i.suit==="diamonds":t==="black"&&(s=i.suit==="clubs"||i.suit==="spades"),s?(y(parseInt(d)*2),k("win"),M(`You won Rp ${(parseInt(d)*2).toLocaleString()}!`)):(k("lose"),M(`You lost Rp ${parseInt(d).toLocaleString()}`)),P(o=>[{timestamp:new Date,amount:parseInt(d),result:s?"win":"lose",resultCard:i,bet:t},...o]),L(i),H(!1),B(!1)},2e3)},G=(t,r,c)=>{const i=u(t.value);if(r==="higher")if(c){const s=n.filter(p=>u(p)>i);if(s.length===0)return j();const o=s[Math.floor(Math.random()*s.length)];return{suit:x[Math.floor(Math.random()*x.length)],value:o}}else{const s=n.filter(p=>u(p)<=i);if(s.length===0)return j();const o=s[Math.floor(Math.random()*s.length)];return{suit:x[Math.floor(Math.random()*x.length)],value:o}}else if(r==="lower")if(c){const s=n.filter(p=>u(p)<i);if(s.length===0)return j();const o=s[Math.floor(Math.random()*s.length)];return{suit:x[Math.floor(Math.random()*x.length)],value:o}}else{const s=n.filter(p=>u(p)>=i);if(s.length===0)return j();const o=s[Math.floor(Math.random()*s.length)];return{suit:x[Math.floor(Math.random()*x.length)],value:o}}else if(r==="red")if(c){const s=["hearts","diamonds"];return{suit:s[Math.floor(Math.random()*s.length)],value:n[Math.floor(Math.random()*n.length)]}}else{const s=["clubs","spades"];return{suit:s[Math.floor(Math.random()*s.length)],value:n[Math.floor(Math.random()*n.length)]}}else if(r==="black")if(c){const s=["clubs","spades"];return{suit:s[Math.floor(Math.random()*s.length)],value:n[Math.floor(Math.random()*n.length)]}}else{const s=["hearts","diamonds"];return{suit:s[Math.floor(Math.random()*s.length)],value:n[Math.floor(Math.random()*n.length)]}}return j()};return h.useEffect(()=>{if(a<1e3){const t=setTimeout(()=>{alert("Your balance has been depleted. Please deposit to continue playing.")},1e3);return()=>clearTimeout(t)}},[a]),e.jsx(R.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"min-h-screen pt-4 pb-20 px-4",children:e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsxs("div",{className:"flex flex-col md:flex-row justify-between mb-6 space-y-3 md:space-y-0",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("button",{onClick:()=>f("/dashboard"),className:"text-gray-400 hover:text-white mr-3",children:e.jsx(O,{size:24})}),e.jsxs("div",{children:[e.jsx("h1",{className:"font-orbitron text-2xl font-bold gradient-text",children:"HIGH LOW GAME"}),e.jsxs("div",{className:"flex text-xs text-gray-400",children:[e.jsxs("span",{className:"mr-4",children:["ID Rom: ",v]}),e.jsxs("span",{children:["ID User: ",N]})]})]})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("div",{className:"text-xs text-gray-400",children:["Balance: ",e.jsxs("span",{className:"text-success-500 font-mono",children:["Rp ",a.toLocaleString()]})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs("button",{onClick:()=>f("/convert"),className:"btn bg-dark-300 hover:bg-dark-200 text-xs py-1 px-3",children:[e.jsx(W,{size:14,className:"mr-1"}),"Convert"]}),e.jsxs("button",{onClick:()=>f("/deposit"),className:"btn bg-dark-300 hover:bg-dark-200 text-xs py-1 px-3",children:[e.jsx(q,{size:14,className:"mr-1"}),"Deposit"]}),e.jsxs("button",{onClick:()=>f("/withdraw"),className:"btn bg-dark-300 hover:bg-dark-200 text-xs py-1 px-3",children:[e.jsx(J,{size:14,className:"mr-1"}),"Withdraw"]})]})]})]}),e.jsxs("div",{className:"card p-4 mb-6",children:[e.jsx("h2",{className:"text-lg font-semibold mb-4 font-orbitron",children:"Predict Higher or Lower"}),e.jsxs("div",{className:"flex flex-col items-center justify-center py-6",children:[e.jsx("div",{className:"mb-6",children:e.jsx(R.div,{initial:m?{rotateY:0}:{},animate:m?{rotateY:180}:{},transition:{duration:.5},style:{transformStyle:"preserve-3d"},children:g?e.jsx(A,{suit:g.suit,value:g.value,hidden:m}):e.jsx(A,{suit:"hearts",value:"A",hidden:!0})})}),$&&e.jsx(R.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},className:`mb-4 text-center font-semibold ${T==="win"?"text-success-500":"text-error-500"}`,children:$}),e.jsxs("div",{className:"w-full max-w-md mb-4",children:[e.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Bet Amount"}),e.jsxs("div",{className:"flex",children:[e.jsx("input",{type:"number",value:d,onChange:t=>I(t.target.value),min:"1000",max:"1000000",className:"input flex-1 font-mono",disabled:l}),e.jsx("button",{onClick:D,disabled:l||parseInt(d)>a,className:`ml-2 btn ${l||parseInt(d)>a?"bg-dark-400 text-gray-500 cursor-not-allowed":"bg-primary-600 hover:bg-primary-700 text-white"}`,children:l?e.jsx(K,{className:"animate-spin",size:20}):"Deal Card"})]})]}),e.jsx("div",{className:"grid grid-cols-4 gap-2 w-full max-w-md mb-4",children:["1000","5000","10000","50000","100000","200000","500000","1000000"].map(t=>e.jsx("button",{onClick:()=>z(t),disabled:l,className:"btn bg-dark-300 hover:bg-dark-200 text-xs p-2",children:parseInt(t).toLocaleString()},t))}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 w-full max-w-md mb-4",children:[e.jsx("button",{onClick:()=>w("lower"),disabled:!l||m,className:`btn py-3 ${l&&!m?"bg-accent-600 hover:bg-accent-700 text-white":"bg-dark-400 text-gray-500 cursor-not-allowed"}`,children:"Lower"}),e.jsx("button",{onClick:()=>w("higher"),disabled:!l||m,className:`btn py-3 ${l&&!m?"bg-accent-600 hover:bg-accent-700 text-white":"bg-dark-400 text-gray-500 cursor-not-allowed"}`,children:"Higher"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 w-full max-w-md",children:[e.jsx("button",{onClick:()=>w("black"),disabled:!l||m,className:`btn py-3 ${l&&!m?"bg-dark-800 hover:bg-dark-900 text-white":"bg-dark-400 text-gray-500 cursor-not-allowed"}`,children:"Black"}),e.jsx("button",{onClick:()=>w("red"),disabled:!l||m,className:`btn py-3 ${l&&!m?"bg-error-600 hover:bg-error-700 text-white":"bg-dark-400 text-gray-500 cursor-not-allowed"}`,children:"Red"})]})]})]}),e.jsx("div",{className:"mb-4",children:e.jsxs("button",{onClick:()=>E(!S),className:"btn btn-outline w-full flex items-center justify-center",children:[e.jsx(Q,{className:"mr-2",size:18}),S?"Hide History & Stats":"Show History & Stats"]})}),S&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"card p-4",children:[e.jsx("h3",{className:"text-lg font-semibold mb-3",children:"History"}),e.jsx("div",{className:"max-h-60 overflow-y-auto",children:b.length>0?e.jsx("div",{className:"space-y-2",children:b.map((t,r)=>e.jsxs("div",{className:"flex justify-between items-center p-2 bg-dark-300 rounded-md",children:[e.jsxs("div",{children:[e.jsxs("div",{className:`text-sm ${t.result==="win"?"text-success-500":"text-error-500"}`,children:[t.result==="win"?"Win":"Loss",": ",t.bet]}),e.jsx("div",{className:"text-xs text-gray-400",children:t.timestamp.toLocaleTimeString()})]}),e.jsxs("div",{className:"font-mono",children:[t.result==="win"?"+":"-",t.amount.toLocaleString()]})]},r))}):e.jsx("div",{className:"text-center text-gray-400 py-6",children:"No game history yet"})})]}),e.jsxs("div",{className:"card p-4",children:[e.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Statistics"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-dark-300 p-3 rounded-md",children:[e.jsx("div",{className:"text-sm text-gray-400",children:"Total Games"}),e.jsx("div",{className:"text-2xl font-semibold",children:b.length})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{className:"bg-dark-300 p-3 rounded-md",children:[e.jsx("div",{className:"text-sm text-gray-400",children:"Wins"}),e.jsx("div",{className:"text-xl font-semibold text-success-500",children:b.filter(t=>t.result==="win").length})]}),e.jsxs("div",{className:"bg-dark-300 p-3 rounded-md",children:[e.jsx("div",{className:"text-sm text-gray-400",children:"Losses"}),e.jsx("div",{className:"text-xl font-semibold text-error-500",children:b.filter(t=>t.result==="lose").length})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{className:"bg-dark-300 p-3 rounded-md",children:[e.jsx("div",{className:"text-sm text-gray-400",children:"Total Profit"}),e.jsxs("div",{className:"text-xl font-semibold text-success-500",children:["Rp ",b.filter(t=>t.result==="win").reduce((t,r)=>t+r.amount,0).toLocaleString()]})]}),e.jsxs("div",{className:"bg-dark-300 p-3 rounded-md",children:[e.jsx("div",{className:"text-sm text-gray-400",children:"Total Loss"}),e.jsxs("div",{className:"text-xl font-semibold text-error-500",children:["Rp ",b.filter(t=>t.result==="lose").reduce((t,r)=>t+r.amount,0).toLocaleString()]})]})]})]})]})]})]})})}export{se as default};
